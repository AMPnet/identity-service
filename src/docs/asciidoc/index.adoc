= AMPnet Identity Service API Documentation
Version {version}, {date}
:doctype: book
:toc: left
:sectnums:
:toclevels: 2
:source-highlighter: prettify
:docinfo: shared

== Introduction
This document contains generated documentation for `AMPnet identity service`.

== Authorization API

=== Get payload
Used to retrieve a unique nonce associated with user address.

.Request
include::{snippets}/AuthorizationControllerTest/mustBeAbleToGetPayload/http-request.adoc[]
.Response
include::{snippets}/AuthorizationControllerTest/mustBeAbleToGetPayload/http-response.adoc[]

=== Authorize jwt
When user signs payload received from `POST /authorize` route correctly with his private key he is authorized and receives jwt.

.Request
include::{snippets}/AuthorizationControllerTest/mustBeAbleToAuthorizeJwt/http-request.adoc[]
.Response
include::{snippets}/AuthorizationControllerTest/mustBeAbleToAuthorizeJwt/http-response.adoc[]

=== Refresh token
.Request
include::{snippets}/AuthorizationControllerTest/mustBeAbleToGetAccessTokenWithRefreshToken/http-request.adoc[]
.Response
include::{snippets}/AuthorizationControllerTest/mustBeAbleToGetAccessTokenWithRefreshToken/http-response.adoc[]

== KYC API
For KYC procedure the system supports Veriff provider.

=== Get Veriff session
Get Veriff session.
For code explanation on `decision` response, see: https://developers.veriff.com/#response-and-error-codes

.Request
include::{snippets}/VeriffControllerTest/mustReturnVeriffSession/http-request.adoc[]
.Response
include::{snippets}/VeriffControllerTest/mustReturnVeriffSession/http-response.adoc[]

=== Handle Veriff session
.Request
include::{snippets}/VeriffControllerTest/mustStoreUserInfoFromVeriff/http-request.adoc[]
.Response
include::{snippets}/VeriffControllerTest/mustStoreUserInfoFromVeriff/http-response.adoc[]

=== Handle Veriff event
.Request
include::{snippets}/VeriffControllerTest/mustHandleVeriffWebhookEvent/http-request.adoc[]
.Response
include::{snippets}/VeriffControllerTest/mustHandleVeriffWebhookEvent/http-response.adoc[]
